#################################
#             Shadows           #
#################################

shadow = true;
shadow-radius = 30;
shadow-opacity = .75
shadow-offset-x = -30;
shadow-offset-y = -30;
# shadow-color = "#000000"

#################################
#           Fading              #
#################################

fading = true;
fade-in-step = 0.07;
fade-out-step = 0.07;
fade-delta = 16

#################################
#   Transparency / Opacity      #
#################################

frame-opacity = 1.0;

#################################
#           Corners             #
#################################

corner-radius = 20

#################################
#            Blur               #
#################################

blur-kern = "3x3box";

#################################
#       General Settings        #
#################################

backend = "glx"
dithered-present = false;
vsync = true;
detect-rounded-corners = true;
detect-client-opacity = true;
use-ewmh-active-win = true
unredir-if-possible = false
detect-transient = true;
use-damage = true;
no-ewmh-fullscreen = false
glx-no-stencil = true;
glx-copy-from-front = false;

rules: ({
  match = "focused";
}, {
  match = "class_g = 'GLWall'";
  shadow = false;
}, {
  match = "class_g = 'Brave-browser' || "
          "class_g = 'vlc'           || "
          "class_g = 'Pqiv'          || "
          "class_g = 'i3lock'        || "
          "class_g = 'mpv'           || "
          "class_g = 'sm64ex'        || "
          "class_g = 'Discord'       || "
          "class_g = 'love'          || "
          "class_g = 'MPlayer'       || "
          "name   *= 'Eww'";
  unredir = false;
}, {
  match = "name = 'Eww - bar_center' || "
          "class_g = 'Eww'           || "
          "class_g = 'eww'           || "
          "class_g = 'yawns'";
  full-shadow = true;
  blur-background = false;
}, {
  match = "window_type = 'unknown'       || "
          "window_type = 'desktop'       || "
          "window_type = 'toolbar'       || "
          "window_type = 'menu'          || "
          "window_type = 'utility'       || "
          "window_type = 'splash'        || "
          "window_type = 'dialog'        || "
          "window_type = 'dropdown_menu' || "
          "window_type = 'popup_menu'    || "
          "window_type = 'tooltip'       || "
          "window_type = 'toolbar'       || "
          "window_type = 'combo'         || "
          "window_type = 'dnd'           || "
          "class_g     = 'Pqiv'          || "
          "class_g     = 'GLWall'        || "
          "class_g     = 'mpv'           || "
          "class_g     = 'eww-music'     || "
          "class_g     = 'eww-calendar'  || "
          "class_g     = 'Eww'           || "
          "class_g     = 'eww'           || "
          "class_g     = 'Rofi'          || "
          "class_g     = 'i3lock'        || "
          "fullscreen";
  corner-radius = 0; 
}, {
  match = "window_type = 'tooltip'      || "
          "window_type = 'dnd'          || "
          "window_type = 'notification' || "
          "class_g = 'Rofi'             || "
          "window_type = 'dock'";
  full-shadow = true;
}, {
  match = "class_g = 'kitty'";
  full-shadow = true;
}, {
  ### ---- i3lock / mantablockscreen rule ----
  match = "class_g = 'i3lock'";
  shader = "/home/cubes/.config/lock/lock.glsl";  # <-- change this path
  shadow = false;
  blur-background = false;

  animations = ({
      triggers = ["open", "show"];
      anim-duration = 0.2;
      offset-y = {
        curve = "cubic-bezier(0, 1, 1, 1)";
        start = "- window-height";
        end = 0;
        duration = "anim-duration";
        };
      opacity = {
        end = 1;
        start = 1;
        duration = "anim-duration";
      };
      shadow-offset-y = "offset-y";
      shadow-opacity = "opacity";
      }, {
      triggers = ["close", "hide"];
      anim-duration = 0.4;
      offset-y = {
        curve = "cubic-bezier(1, 0, 1, 1)";
        start = 0;
        end = "- window-height";
        duration = "anim-duration";
        };
      shadow-offset-y = "offset-y";
      opacity = {
        end = 1;
        start = 1;
        duration = "anim-duration";
      };
      shadow-opacity = "opacity";
  });
}, {
  match = "window_type = 'notification'";
  animations = ({
      triggers = ["close", "hide"];
      preset = "disappear";
      scale = 1.4;
      duration = 0.2;
  });
}, {
  match = "class_g     = 'eww'     ||"
          "class_g     = 'Eww'     ||"
          "class_g = 'Rofi'";
  animations = ({
      triggers = ["open", "show"];
      preset = "slide-in";
      direction = "up";
      duration = 0.1;
      }, {
      triggers = ["close", "hide"];
      preset = "slide-out";
      direction = "up";
      duration = 0.1;
  });
}, {
  match = "window_type = 'popup_menu'   ||"
          "window_type = 'tooltip'      ||"
          "window_type = 'dropdown_menu'";
  animations = ({
      triggers = ["open", "show"];
      preset = "slide-in";
      direction = "up";
      duration = 0.1;
      }, {
      triggers = ["close", "hide"];
      preset = "slide-out";
      direction = "up";
      duration = 0.1;
  });
  opacity = 0.8;
})

animations = ({
  duration = 0.2;
  initial-scale = 0.8;
  
  triggers = ["open", "show"];
  anim-curve = {
        curve = "cubic-bezier(0, 1.5, 1, 1)";
        start = 0;
        end = 1;
        duration = "duration";
        }
  scale-x = "anim-curve * (1 - initial-scale) + initial-scale";
  scale-y = "anim-curve * (1 - initial-scale) + initial-scale";
  offset-x = "(1 - scale-x) / 2 * window-width" 
  offset-y = "(1 - scale-y) / 2 * window-height" 

  opacity = "anim-curve";
  shadow-offset-x = "offset-x";
  shadow-offset-y = "offset-y";
  shadow-scale-x = "scale-x";
  shadow-scale-y = "scale-y";
}, {
  duration = 0.1;
  initial-scale = 0.8;

  triggers = ["hide"];
  anim-curve = {
        curve = "cubic-bezier(0, 0, 1, -0.5)";
        start = 1;
        end = 0;
        duration = "duration";
        }
  scale-x = "anim-curve * (1 - initial-scale) + initial-scale";
  scale-y = "anim-curve * (1 - initial-scale) + initial-scale";
  offset-x = "(1-scale-x) / 2 * window-width" 
  offset-y = "(1-scale-y) / 2 * window-height" 

  opacity = "anim-curve";
  shadow-offset-x = "offset-x";
  shadow-offset-y = "offset-y";
  shadow-scale-x = "scale-x";
  shadow-scale-y = "scale-y";
}, {
  triggers = ["close"];
  preset = "disappear";
  scale = 1.4;
  duration = 0.2;
}, {
  triggers = ["geometry"];
  preset = "geometry-change";
  duration = 0.2;
})

blur:
{
  method = "gaussian";
  size = 5;
  deviation = 2.5;
};

